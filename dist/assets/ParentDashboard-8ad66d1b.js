import{_ as e}from"./supabase-c91fe37d.js";import{u as s,j as l}from"./index-9ea7fdb9.js";import{b as t,r as a}from"./vendor-18e24f2a.js";import{d as n}from"./database-aeda64df.js";import{c as i}from"./dateUtils-d91f8443.js";import{P as r,h as d,i as c,j as x,d as o,k as m,l as p,m as g,C as h,n as u,o as j}from"./icons-61d3c260.js";import"./routing-3469486c.js";const f=t.lazy(()=>e(()=>import("./EventManagement-e91c59b2.js"),["assets/EventManagement-e91c59b2.js","assets/index-9ea7fdb9.js","assets/vendor-18e24f2a.js","assets/routing-3469486c.js","assets/supabase-c91fe37d.js","assets/icons-61d3c260.js","assets/index-0190e708.css","assets/storage-afc0bc2e.js","assets/dateUtils-d91f8443.js"])),b=t.lazy(()=>e(()=>import("./Statistics-e5f73eab.js"),["assets/Statistics-e5f73eab.js","assets/index-9ea7fdb9.js","assets/vendor-18e24f2a.js","assets/routing-3469486c.js","assets/supabase-c91fe37d.js","assets/icons-61d3c260.js","assets/index-0190e708.css","assets/storage-afc0bc2e.js","assets/dateUtils-d91f8443.js"])),N=t.lazy(()=>e(()=>import("./RateManagement-f8e76fa4.js"),["assets/RateManagement-f8e76fa4.js","assets/index-9ea7fdb9.js","assets/vendor-18e24f2a.js","assets/routing-3469486c.js","assets/supabase-c91fe37d.js","assets/icons-61d3c260.js","assets/index-0190e708.css","assets/storage-afc0bc2e.js","assets/dateUtils-d91f8443.js"])),y=t.lazy(()=>e(()=>import("./PointExchange-9ec4b1f0.js"),["assets/PointExchange-9ec4b1f0.js","assets/index-9ea7fdb9.js","assets/vendor-18e24f2a.js","assets/routing-3469486c.js","assets/supabase-c91fe37d.js","assets/icons-61d3c260.js","assets/index-0190e708.css","assets/storage-afc0bc2e.js","assets/dateUtils-d91f8443.js"])),v=t.lazy(()=>e(()=>import("./FamilyManagement-50ef6a36.js"),["assets/FamilyManagement-50ef6a36.js","assets/index-9ea7fdb9.js","assets/vendor-18e24f2a.js","assets/routing-3469486c.js","assets/supabase-c91fe37d.js","assets/icons-61d3c260.js","assets/index-0190e708.css"])),w=()=>{const{user:e}=s(),[t,w]=a.useState([]),[C,E]=a.useState([]),[I,_]=a.useState([]),[T,S]=a.useState({}),[D,P]=a.useState(!1),[A,R]=a.useState(""),[z,L]=a.useState("tasks"),[O,V]=a.useState(!0),[$,q]=a.useState(null),M=e=>{L(e),"family"===z&&"family"!==e&&U()};a.useEffect(()=>{(null==e?void 0:e.familyId)&&U()},[null==e?void 0:e.familyId]);const U=async()=>{if(null==e?void 0:e.familyId)try{V(!0),q(null);const[s,l,t,a]=await Promise.all([n.getTasks(e.familyId),n.getTaskCompletions(e.familyId),n.getUsers(e.familyId),n.getPointTransactions(e.familyId)]);w(s),E(l.filter(e=>"PENDING"===e.status));const i=t.filter(e=>"CHILD"===e.role);_(i);const r={};i.forEach(e=>{const s=a.filter(s=>s.userId===e.id),l=s.filter(e=>"EARNED"===e.type).reduce((e,s)=>e+s.amount,0),t=s.filter(e=>"EXCHANGED"===e.type).reduce((e,s)=>e+s.amount,0);r[e.id]=l-t}),S(r)}catch(s){q("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸè¨­å®šãŒå¿…è¦ã§ã™ã€‚Supabaseã§database-schema.sqlã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚")}finally{V(!1)}},F=async(s,l)=>{if(null==e?void 0:e.familyId)try{const a=C.find(e=>e.id===s);if(!a)return;if(await n.updateTaskCompletion(s,{status:l?"APPROVED":"REJECTED",approvedAt:new Date}),l){const s=t.find(e=>e.id===a.taskId);s&&await n.createPointTransaction({userId:a.childId,type:"EARNED",amount:s.points,description:`ã‚¿ã‚¹ã‚¯å®Œäº†: ${s.title}`,createdAt:new Date},e.familyId)}await U()}catch(a){q("æ‰¿èªå‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸ")}},G=e=>{const s=I.find(s=>s.id===e);return(null==s?void 0:s.name)||"ä¸æ˜"},H=e=>{const s=t.find(s=>s.id===e);return(null==s?void 0:s.title)||"ä¸æ˜ãªã‚¿ã‚¹ã‚¯"},B=async s=>{if(null==e?void 0:e.familyId)if((e=>!C.some(s=>s.taskId===e))(s)){if(confirm("ã“ã®ã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"))try{await n.deleteTask(s),await U()}catch(l){q("ã‚¿ã‚¹ã‚¯ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ")}}else alert("å­ä¾›ãŒå®Ÿè¡Œæ¸ˆã¿ã®ã‚¿ã‚¹ã‚¯ã¯å‰Šé™¤ã§ãã¾ã›ã‚“ã€‚")},J=e=>C.filter(s=>s.taskId===e);a.useEffect(()=>{I.length>0&&!A&&R("all")},[I,A]);const X="all"===A?t:"general"===A?t.filter(e=>!e.assignedTo):(Y=A,t.filter(e=>e.assignedTo===Y));var Y;const{notExecuted:K,executed:Q}=(e=>{const s=[],l=[];return e.forEach(e=>{0===J(e.id).length?s.push(e):l.push(e)}),{notExecuted:s,executed:l}})(X);return O?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-purple-500 border-t-transparent mx-auto mb-4"}),l.jsx("p",{className:"text-purple-600 text-lg font-medium",children:"ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­..."})]})}):$?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-red-600 text-lg mb-4",children:$}),l.jsx("button",{onClick:U,className:"btn-primary",children:"å†èª­ã¿è¾¼ã¿"})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsx("h2",{className:"text-3xl font-bold text-purple-800",children:"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ä¿è­·è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰"}),"tasks"===z&&l.jsxs("button",{onClick:()=>P(!0),className:"btn-primary flex items-center gap-2",children:[l.jsx(r,{className:"w-5 h-5"}),"âœ¨ æ–°ã—ã„ã‚¯ã‚¨ã‚¹ãƒˆ"]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:"md:hidden",children:l.jsxs("select",{value:z,onChange:e=>M(e.target.value),className:"w-full p-4 bg-white border-2 border-purple-300 rounded-2xl font-bold text-purple-800 text-lg shadow-lg focus:ring-4 focus:ring-purple-200 focus:border-purple-500",children:[l.jsx("option",{value:"tasks",children:"ğŸ¯ ã‚¯ã‚¨ã‚¹ãƒˆç®¡ç†"}),l.jsx("option",{value:"events",children:"ğŸ‰ ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†"}),l.jsx("option",{value:"statistics",children:"ğŸ“Š çµ±è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆ"}),l.jsx("option",{value:"rates",children:"âš™ï¸ ãƒ¬ãƒ¼ãƒˆè¨­å®š"}),l.jsx("option",{value:"exchange",children:"ğŸ’° ãƒã‚¤ãƒ³ãƒˆäº¤æ›"}),l.jsx("option",{value:"family",children:"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶æ—ç®¡ç†"})]})}),l.jsxs("div",{className:"hidden md:flex gap-2 lg:gap-4 flex-wrap",children:[l.jsxs("button",{onClick:()=>M("tasks"),className:"px-4 lg:px-6 py-3 rounded-full font-bold transition-all flex items-center gap-2 text-sm lg:text-base "+("tasks"===z?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[l.jsx(d,{className:"w-4 h-4 lg:w-5 lg:h-5"}),l.jsx("span",{className:"hidden lg:inline",children:"ğŸ¯ ã‚¯ã‚¨ã‚¹ãƒˆç®¡ç†"}),l.jsx("span",{className:"lg:hidden",children:"ğŸ¯ ã‚¯ã‚¨ã‚¹ãƒˆ"})]}),l.jsxs("button",{onClick:()=>M("events"),className:"px-4 lg:px-6 py-3 rounded-full font-bold transition-all flex items-center gap-2 text-sm lg:text-base "+("events"===z?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[l.jsx(c,{className:"w-4 h-4 lg:w-5 lg:h-5"}),l.jsx("span",{className:"hidden lg:inline",children:"ğŸ‰ ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†"}),l.jsx("span",{className:"lg:hidden",children:"ğŸ‰ ã‚¤ãƒ™ãƒ³ãƒˆ"})]}),l.jsxs("button",{onClick:()=>M("statistics"),className:"px-4 lg:px-6 py-3 rounded-full font-bold transition-all flex items-center gap-2 text-sm lg:text-base "+("statistics"===z?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[l.jsx(x,{className:"w-4 h-4 lg:w-5 lg:h-5"}),l.jsx("span",{className:"hidden lg:inline",children:"ğŸ“Š çµ±è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆ"}),l.jsx("span",{className:"lg:hidden",children:"ğŸ“Š çµ±è¨ˆ"})]}),l.jsxs("button",{onClick:()=>M("rates"),className:"px-4 lg:px-6 py-3 rounded-full font-bold transition-all flex items-center gap-2 text-sm lg:text-base "+("rates"===z?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[l.jsx(o,{className:"w-4 h-4 lg:w-5 lg:h-5"}),l.jsx("span",{className:"hidden lg:inline",children:"âš™ï¸ ãƒ¬ãƒ¼ãƒˆè¨­å®š"}),l.jsx("span",{className:"lg:hidden",children:"âš™ï¸ ãƒ¬ãƒ¼ãƒˆ"})]}),l.jsxs("button",{onClick:()=>M("exchange"),className:"px-4 lg:px-6 py-3 rounded-full font-bold transition-all flex items-center gap-2 text-sm lg:text-base "+("exchange"===z?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[l.jsx(m,{className:"w-4 h-4 lg:w-5 lg:h-5"}),l.jsx("span",{className:"hidden lg:inline",children:"ğŸ’° ãƒã‚¤ãƒ³ãƒˆäº¤æ›"}),l.jsx("span",{className:"lg:hidden",children:"ğŸ’° ãƒã‚¤ãƒ³ãƒˆ"})]}),l.jsxs("button",{onClick:()=>M("family"),className:"px-4 lg:px-6 py-3 rounded-full font-bold transition-all flex items-center gap-2 text-sm lg:text-base "+("family"===z?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[l.jsx(p,{className:"w-4 h-4 lg:w-5 lg:h-5"}),l.jsx("span",{className:"hidden lg:inline",children:"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶æ—ç®¡ç†"}),l.jsx("span",{className:"lg:hidden",children:"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶æ—"})]})]})]}),"events"===z?l.jsx(a.Suspense,{fallback:l.jsx("div",{className:"text-center py-8",children:"ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†ã‚’èª­ã¿è¾¼ã¿ä¸­..."}),children:l.jsx(f,{children:I})}):"statistics"===z?l.jsx(a.Suspense,{fallback:l.jsx("div",{className:"text-center py-8",children:"çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­..."}),children:l.jsx(b,{children:I})}):"rates"===z?l.jsx(a.Suspense,{fallback:l.jsx("div",{className:"text-center py-8",children:"ãƒ¬ãƒ¼ãƒˆè¨­å®šã‚’èª­ã¿è¾¼ã¿ä¸­..."}),children:l.jsx(N,{})}):"exchange"===z?l.jsx(a.Suspense,{fallback:l.jsx("div",{className:"text-center py-8",children:"ãƒã‚¤ãƒ³ãƒˆäº¤æ›ã‚’èª­ã¿è¾¼ã¿ä¸­..."}),children:l.jsx(y,{children:I})}):"family"===z?l.jsx(a.Suspense,{fallback:l.jsx("div",{className:"text-center py-8",children:"å®¶æ—ç®¡ç†ã‚’èª­ã¿è¾¼ã¿ä¸­..."}),children:l.jsx(v,{onDataUpdate:U})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx(p,{className:"w-8 h-8 text-purple-500"}),l.jsx("h3",{className:"text-xl font-bold text-purple-700",children:"ğŸ‘§ ãŠå­æ§˜ã®çŠ¶æ³"})]}),l.jsx("div",{className:"space-y-3",children:I.map(e=>l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-pink-50 to-purple-50 rounded-2xl border-2 border-pink-200",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-purple-800",children:e.name}),l.jsx("p",{className:"text-sm text-purple-600",children:e.birthDate?`${i(e.birthDate)}æ­³`:`${e.age||0}æ­³`})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"font-bold text-2xl text-purple-600",children:[T[e.id]||0,"pt"]}),l.jsx("p",{className:"text-xs text-purple-500",children:"ä¿æœ‰ãƒã‚¤ãƒ³ãƒˆ"})]})]},e.id))})]}),l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx(g,{className:"w-8 h-8 text-yellow-500 animate-pulse"}),l.jsx("h3",{className:"text-xl font-bold text-yellow-700",children:"â° æ‰¿èªå¾…ã¡"})]}),l.jsxs("div",{className:"space-y-3",children:[C.slice(0,4).map(e=>l.jsxs("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-2xl border-2 border-yellow-300",children:[l.jsx("p",{className:"font-bold text-orange-800 mb-1",children:H(e.taskId)}),l.jsxs("p",{className:"text-sm text-orange-600 mb-3",children:[G(e.childId),"ã•ã‚“"]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:()=>F(e.id,!0),className:"flex-1 bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-3 rounded-full flex items-center justify-center gap-2 transition-all",children:[l.jsx(h,{className:"w-4 h-4"}),"âœ… æ‰¿èª"]}),l.jsxs("button",{onClick:()=>F(e.id,!1),className:"flex-1 bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-3 rounded-full flex items-center justify-center gap-2 transition-all",children:[l.jsx(u,{className:"w-4 h-4"}),"âŒ å´ä¸‹"]})]})]},e.id)),0===C.length&&l.jsx("div",{className:"text-center py-6",children:l.jsx("p",{className:"text-yellow-600",children:"ğŸ“ æ‰¿èªå¾…ã¡ã®ã‚¯ã‚¨ã‚¹ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“"})})]})]})]}),l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx(d,{className:"w-8 h-8 text-green-500"}),l.jsx("h3",{className:"text-xl font-bold text-green-700",children:"ğŸ¯ ã‚¯ã‚¨ã‚¹ãƒˆç®¡ç†"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:"md:hidden",children:l.jsxs("select",{value:A,onChange:e=>R(e.target.value),className:"w-full p-3 bg-white border-2 border-purple-300 rounded-xl font-medium text-purple-800 shadow-md",children:[l.jsx("option",{value:"all",children:"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å…¨ä½“è¡¨ç¤º"}),l.jsx("option",{value:"general",children:"ğŸ‘¥ å…¨å“¡å¯¾è±¡"}),I.map(e=>l.jsxs("option",{value:e.id,children:[e.name,"ã•ã‚“"]},e.id))]})}),l.jsxs("div",{className:"hidden md:flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>R("all"),className:"px-3 lg:px-4 py-2 rounded-full font-medium transition-all text-sm lg:text-base "+("all"===A?"bg-purple-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å…¨ä½“è¡¨ç¤º"}),l.jsx("button",{onClick:()=>R("general"),className:"px-3 lg:px-4 py-2 rounded-full font-medium transition-all text-sm lg:text-base "+("general"===A?"bg-purple-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"ğŸ‘¥ å…¨å“¡å¯¾è±¡"}),I.map(e=>l.jsxs("button",{onClick:()=>R(e.id),className:"px-3 lg:px-4 py-2 rounded-full font-medium transition-all text-sm lg:text-base "+(A===e.id?"bg-purple-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[e.name,"ã•ã‚“"]},e.id))]})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 lg:gap-6",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-bold text-blue-700 mb-4 flex items-center gap-2",children:["ğŸ¯ å®Ÿè¡Œå‰ã‚¯ã‚¨ã‚¹ãƒˆ (",K.length,"ä»¶)"]}),l.jsxs("div",{className:"space-y-3",children:[K.map(e=>{const s=e.assignedTo?I.find(s=>s.id===e.assignedTo):null;return l.jsxs("div",{className:"p-3 lg:p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl border-2 border-blue-200 hover:shadow-lg transition-all",children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsx("h5",{className:"font-bold text-blue-800 text-sm lg:text-base leading-tight",children:e.title}),l.jsxs("span",{className:"text-sm lg:text-lg font-bold text-purple-600 bg-white px-2 lg:px-3 py-1 rounded-full border-2 border-purple-300 whitespace-nowrap ml-2",children:[e.points,"pt"]})]}),l.jsxs("div",{className:"flex items-center gap-1 lg:gap-2 mb-2 flex-wrap",children:[l.jsx("span",{className:"text-xs px-2 lg:px-3 py-1 bg-blue-200 text-blue-700 rounded-full",children:e.category}),l.jsx("span",{className:"text-xs px-2 lg:px-3 py-1 bg-purple-200 text-purple-700 rounded-full",children:s?s.name:"å…¨å“¡"})]}),l.jsx("p",{className:"text-xs lg:text-sm text-blue-700 mb-3 leading-relaxed",children:e.description}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:()=>B(e.id),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-full transition-colors touch-manipulation",title:"ã‚¯ã‚¨ã‚¹ãƒˆã‚’å‰Šé™¤",children:l.jsx(j,{className:"w-4 h-4"})})})]},e.id)}),0===K.length&&l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-blue-600",children:"ğŸ‰ å®Ÿè¡Œå‰ã®ã‚¯ã‚¨ã‚¹ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“"})})]})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-bold text-green-700 mb-4 flex items-center gap-2",children:["âœ… å®Ÿè¡Œæ¸ˆã¿ã‚¯ã‚¨ã‚¹ãƒˆ (",Q.length,"ä»¶)"]}),l.jsxs("div",{className:"space-y-3",children:[Q.map(e=>{const s=e.assignedTo?I.find(s=>s.id===e.assignedTo):null,t=J(e.id);return l.jsxs("div",{className:"p-3 lg:p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl border-2 border-green-200",children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsx("h5",{className:"font-bold text-green-800 text-sm lg:text-base leading-tight",children:e.title}),l.jsxs("span",{className:"text-sm lg:text-lg font-bold text-purple-600 bg-white px-2 lg:px-3 py-1 rounded-full border-2 border-purple-300 whitespace-nowrap ml-2",children:[e.points,"pt"]})]}),l.jsxs("div",{className:"flex items-center gap-1 lg:gap-2 mb-2 flex-wrap",children:[l.jsx("span",{className:"text-xs px-2 lg:px-3 py-1 bg-green-200 text-green-700 rounded-full",children:e.category}),l.jsx("span",{className:"text-xs px-2 lg:px-3 py-1 bg-purple-200 text-purple-700 rounded-full",children:s?s.name:"å…¨å“¡"}),l.jsxs("span",{className:"text-xs px-2 lg:px-3 py-1 bg-emerald-200 text-emerald-700 rounded-full",children:[t.length,"å›å®Ÿè¡Œ"]})]}),l.jsx("p",{className:"text-xs lg:text-sm text-green-700 leading-relaxed",children:e.description})]},e.id)}),0===Q.length&&l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-green-600",children:"ğŸ“ å®Ÿè¡Œæ¸ˆã¿ã®ã‚¯ã‚¨ã‚¹ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“"})})]})]})]})]}),D&&l.jsx(k,{onClose:()=>P(!1),onSave:U,user:e,children:I})]})]})},k=({onClose:e,onSave:s,user:t,children:r})=>{const[d,c]=a.useState({title:"",description:"",points:10,category:"å®¶äº‹",difficulty:"EASY",isRecurring:!1,assignedTo:""});return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆ"}),l.jsxs("form",{onSubmit:async l=>{if(l.preventDefault(),null==t?void 0:t.familyId)try{await n.createTask({...d,assignedTo:d.assignedTo||void 0,createdBy:t.id},t.familyId),s(),e()}catch(a){alert("ã‚¿ã‚¹ã‚¯ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ")}},className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ã‚¿ã‚¹ã‚¯å"}),l.jsx("input",{type:"text",value:d.title,onChange:e=>c({...d,title:e.target.value}),className:"input-field",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"èª¬æ˜"}),l.jsx("textarea",{value:d.description,onChange:e=>c({...d,description:e.target.value}),className:"input-field",rows:3})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"å¯¾è±¡ã®ãŠå­æ§˜"}),l.jsxs("select",{value:d.assignedTo,onChange:e=>c({...d,assignedTo:e.target.value}),className:"input-field",children:[l.jsx("option",{value:"",children:"å…¨å“¡"}),r.map(e=>l.jsxs("option",{value:e.id,children:[e.name," (",e.birthDate?`${i(e.birthDate)}æ­³`:`${e.age||0}æ­³`,")"]},e.id))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ãƒã‚¤ãƒ³ãƒˆ"}),l.jsx("input",{type:"number",value:d.points,onChange:e=>c({...d,points:parseInt(e.target.value)}),className:"input-field",min:"1",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ã‚«ãƒ†ã‚´ãƒª"}),l.jsxs("select",{value:d.category,onChange:e=>c({...d,category:e.target.value}),className:"input-field",children:[l.jsx("option",{value:"å®¶äº‹",children:"å®¶äº‹"}),l.jsx("option",{value:"å‹‰å¼·",children:"å‹‰å¼·"}),l.jsx("option",{value:"é‹å‹•",children:"é‹å‹•"}),l.jsx("option",{value:"ãã®ä»–",children:"ãã®ä»–"})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),l.jsx("button",{type:"submit",className:"btn-primary",children:"ä½œæˆ"})]})]})]})})};export{w as default};
